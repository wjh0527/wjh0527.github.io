<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>acl+nat | 蜡笔小王的博客</title><meta name="keywords" content="网络基础"><meta name="author" content="蜡笔小王"><meta name="copyright" content="蜡笔小王"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="acl+nat"><meta name="application-name" content="acl+nat"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="acl+nat"><meta property="og:url" content="https://wjh0527.github.io.git/2025/09/03/acl-nat/index.html"><meta property="og:site_name" content="蜡笔小王的博客"><meta property="og:description" content="Web"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://wjh0527.github.io.git/assets/lbxw.jpg"><meta property="article:author" content="蜡笔小王"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://wjh0527.github.io.git/assets/lbxw.jpg"><meta name="description" content="Web"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://wjh0527.github.io.git/2025/09/03/acl-nat/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="manifest" href="/manifest.json"/><meta name="msapplication-TileColor" content="var(--anzhiyu-main)"/><link rel="mask-icon" href="/img/siteicon/apple-icon-180.png" color="#5bbad5"/><link rel="apple-touch-icon" sizes="180x180" href="/img/siteicon/apple-icon-180.png"/><link rel="apple-touch-icon-precomposed" sizes="180x180" href="/img/siteicon/apple-icon-180.png"/><link rel="icon" type="image/png" sizes="32x32" href="/img/siteicon/32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/img/siteicon/16.png"/><link rel="bookmark" href="/img/siteicon/apple-icon-180.png"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-2732.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2732-2048.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2388.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2388-1668.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1536-2048.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-1536.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2224.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2224-1668.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1620-2160.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2160-1620.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1290-2796.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2796-1290.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1179-2556.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2556-1179.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1284-2778.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2778-1284.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1170-2532.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2532-1170.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1125-2436.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2436-1125.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2688.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2688-1242.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-828-1792.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1792-828.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2208.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2208-1242.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-750-1334.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1334-750.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-640-1136.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1136-640.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: {"enable":true,"title":"每天学习亿点点","addFriendPlaceholder":"昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"},
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2024/07/27/125766904/ba62475f396df9de3316a08ed9e65d86_5680958632268053399..png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: 蜡笔小王","link":"链接: ","source":"来源: 蜡笔小王的博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '蜡笔小王的博客',
  title: 'acl+nat',
  postAI: '',
  pageFillDescription: 'NAT与ACL技术学习笔记, 一、NAT（网络地址转换）, 1.1 核心定义与价值, 1.2 关键概念与地址分类, 1.2.1 地址类型, 1.2.2 NAT术语, 1.3 NAT核心优势, 1.4 NAT分类与配置, 1.4.1 1. 静态NAT（一对一映射）, 1.4.2 2. 动态NAT（多对多映射）, 1.4.3 3. NAPT（端口地址转换多对一）, 1.4.4 4. Easy IP（简化版NAPT）, 1.5 环境准备（内网服务器配置）, 1.5.1 Telnet配置, 1.5.2 FTP配置, 二、ACL（访问控制列表）, 2.1 核心定义与作用, 2.2 ACL分类与适用场景, 2.3 ACL核心规则, 2.4 典型实验配置, 2.4.1 实验一：基本ACL（拒绝192.168.1.0x2F24访问192.168.3.0x2F24）, 2.4.2 实验二：高级ACL（控制Telnet访问仅允许192.168.1.2访问）, 2.4.3 实验三：高级ACL（单向禁Ping禁止192.168.1.1 Ping 192.168.1.2）, 2.4.4 实验四：基于时间的ACL（工作时间禁止财务部访问外网）, 2.4.5 实验五：二层ACL（禁止特定MAC地址的PC访问）, 2.5 关键验证命令, 操作配置与技术学习笔记一网络地址转换核心定义与价值网络地址转换是部署在内网与外网网关设备上的技术通过将私网地址转换为公有地址解决地址枯竭问题同时隐藏内部网络结构提升安全性关键概念与地址分类地址类型地址类型定义范围特点公有地址需向申请全球唯一可在路由无固定范围如私有地址仅用于内部网络不可在路由免费使用个预留网段术语术语含义示例内部本地地址内网设备的私网未转换前的私网内部全局地址用于替代内部本地地址的公网转换后映射的公网外部全局地址外网设备的公网从内网视角互联网服务器公网外部本地地址外网设备的私网从内网视角外网企业内部的私网核心优势节省公有地址多台私网设备可共用一个或多个公网访问外网降低地址采购成本提升网络安全性对外隐藏私网避免外网直接攻击内网设备分类与配置静态一对一映射核心特点私网与公网固定绑定不节省地址但支持外网访问内网服务器如服务器适用场景发布内网服务器需外网通过固定公网访问配置示例华为设备路由器场景将内网服务器的端口端口映射到公网的对应端口端口级静态映射推荐仅开放特定服务服务映射服务映射地址级静态映射不推荐开放所有服务验证命令查看静态映射表动态多对多映射核心特点私网从公网地址池动态获取映射地址池容量决定同时访问外网的最大设备数适用场景私网设备数量较少公网地址相对充足的场景配置步骤华为设备定义允许转换的私网流量创建基本允许网段创建公网地址池地址池个公网在公网接口应用动态连接外网的接口公网仅地址转换不做端口映射端口地址转换多对一核心特点多台私网设备映射到同一个公网的不同端口大幅节省公网地址最常用适用场景中小型企业家庭网络私网设备多公网少配置示例省略默认使用接口公网端口映射简化版核心特点无需创建公网地址池直接将私网转换为网关出接口的公网出接口动态获取时也适用如拨号上网适用场景小型网络如家庭网关出接口使用动态公网配置与一致同的配置环境准备内网服务器配置如需验证对服务器的发布功能需先在内部服务器如路由器配置和服务配置允许个并发连接密码认证配置登录密码配置启用服务设置默认目录设备闪存进入视图配置用户创建用户密码加密存储服务类型为限制访问目录最大并发连接空闲永不超时二访问控制列表核心定义与作用访问控制列表是通过定义规则对数据包进行分类与过滤的技术核心作用包括控制网络访问如拒绝某网段访问外网限制特定服务如禁止配合等功能如指定某网段使用特定公网地址池分类与适用场景类型编号范围匹配参数适用场景应用原则基本仅源地址简单过滤如拒绝访问外网离目标最近应用在出接口方向高级源目的协议端口精细过滤如仅允许访问服务离源最近应用在入接口方向二层源目的以太帧类型二层网络过滤如禁止某访问交换机应用在接入层交换机接口用户自定义自定义匹配字段如报文头部字段特殊场景如根据值过滤按需选择接口与方向核心规则匹配顺序按规则编号从小到大匹配一旦匹配立即终止不检查后续规则默认动作所有隐含拒绝所有未匹配数据包的规则需手动添加允许其他流量规则步长默认步长为规则编号可通过调整方便插入中间规则典型实验配置实验一基本拒绝访问拓扑内网生产区财务部通过路由器连接配置思路基本离目标近应用在的接口连接财务部出方向创建基本拒绝生产区网段允许其他所有流量避免隐含拒绝影响其他业务应用到接口连接财务部的接口目标网段侧出方向应用从到财务部查看与修改查看所有规则删除规则调整规则步长为后续规则编号实验二高级控制访问仅允许访问拓扑路由器提供服务仅允许访问配置思路高级离源近应用在的接口接入侧入方向配置的服务创建高级允许访问的端口拒绝其他所有设备访问允许其他所有流量应用到接口接入的接口源侧入方向应用从到简化配置用基本绑定直接在界面应用实验三高级单向禁禁止原理基于协议请求报文对应发起响应对应回复仅禁止报文即可实现单向禁拒绝发送的报文请求实验四基于时间的工作时间禁止财务部访问外网需求工作日周一至周五禁止财务部访问外网配置时间范围工作日工作日创建基本并绑定时间范围工作时间拒绝应用到外网接口出方向连接外网的接口实验五二层禁止特定地址的访问需求禁止地址为的接入网络创建二层拒绝目标接入的交换机接口入方向应用关键验证命令功能需求命令查看所有规则查看应用接口操作配置访问控制列表的配置也可以理解为规则集的分类基本源地址等离目标最近的端口方向为高级源地址目的地址源端口目的端口等离源最近的端口方向为二层源地址目的地址以太帧协议类型等用户自定义的两个动作允许拒绝的两个方向进站出站的规则从上至下一旦匹配立即终止没有匹配不进行任何处理系列路由器支持两种匹配顺序配置顺序和自动排序配置顺序按规则编号从小到大的顺序进行匹配自动排序使用深度优先的原则进行匹配即根据规则的精确度排序的配置配置方式有两种编号方式与命名方式实验一基本的配置拒绝网段访问网段只匹配源地址应用在离目标最近的端口方向为所以应该做在上应用在端口上方向为查看规则应用规则删除规则配置规则步长默认为可以在中间插入规则实验二高级的配置控制访问分析即过滤源地址又要对目标的服务端口进行检查所以用高级高级应该做在离源最的端口上方向为所以应该在上做应用在端口方向为上配置访问上配置同时也可以使用基本实现访问控制实验三配置单向禁实验四基于时间的配置时间配置将应用到端口实验五二层的配置思考其实配置规则是非常复杂的我们需要对数据的流向非常清楚对常见的协议要非常清楚如指定时间不能上指定时间不能看爱奇艺视频不能使用迅雷等下载工具等等请大家下来除了掌握的基本配置外还需要掌握具真实场景的应用配置使用能进行远程管理服务对应的端口号要求拒绝允许对进行',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-09-03 16:10:03',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="/./assets/lbxw.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="安知鱼的博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="安知鱼的博客"/><span class="back-menu-item-text">安知鱼的博客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">蜡笔小王的博客</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" alt="微信" src="/null"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="/null"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/SQL%E6%B3%A8%E5%85%A5/" style="font-size: 1.05rem;">SQL注入<sup>2</sup></a><a href="/tags/windows/" style="font-size: 1.05rem;">windows<sup>1</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/" style="font-size: 1.05rem;">网络基础<sup>20</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/09/"><span class="card-archive-list-date">九月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">23</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/08/"><span class="card-archive-list-date">八月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/" itemprop="url">网络基础</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>网络基础</span></a></span></div></div><h1 class="post-title" itemprop="name headline">acl+nat</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-09-03T07:56:44.000Z" title="发表于 2025-09-03 15:56:44">2025-09-03</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-09-03T08:10:03.779Z" title="更新于 2025-09-03 16:10:03">2025-09-03</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="acl+nat"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为成都"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>成都</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src=""></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://wjh0527.github.io.git/2025/09/03/acl-nat/"><header><a class="post-meta-categories" href="/categories/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/" itemprop="url">网络基础</a><a href="/tags/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/" tabindex="-1" itemprop="url">网络基础</a><h1 id="CrawlerTitle" itemprop="name headline">acl+nat</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">蜡笔小王</span><time itemprop="dateCreated datePublished" datetime="2025-09-03T07:56:44.000Z" title="发表于 2025-09-03 15:56:44">2025-09-03</time><time itemprop="dateCreated datePublished" datetime="2025-09-03T08:10:03.779Z" title="更新于 2025-09-03 16:10:03">2025-09-03</time></header><h1 id="NAT与ACL技术学习笔记"><a href="#NAT与ACL技术学习笔记" class="headerlink" title="NAT与ACL技术学习笔记"></a>NAT与ACL技术学习笔记</h1><h2 id="一、NAT（网络地址转换）"><a href="#一、NAT（网络地址转换）" class="headerlink" title="一、NAT（网络地址转换）"></a>一、NAT（网络地址转换）</h2><h3 id="1-1-核心定义与价值"><a href="#1-1-核心定义与价值" class="headerlink" title="1.1 核心定义与价值"></a>1.1 核心定义与价值</h3><p>NAT（Network Address Translation，网络地址转换）是部署在<strong>内网与外网网关设备</strong>上的技术，通过将私网IP地址转换为公有IP地址，解决IPv4地址枯竭问题，同时隐藏内部网络结构，提升安全性。</p>
<h3 id="1-2-关键概念与地址分类"><a href="#1-2-关键概念与地址分类" class="headerlink" title="1.2 关键概念与地址分类"></a>1.2 关键概念与地址分类</h3><h4 id="1-2-1-地址类型"><a href="#1-2-1-地址类型" class="headerlink" title="1.2.1 地址类型"></a>1.2.1 地址类型</h4><table>
<thead>
<tr>
<th>地址类型</th>
<th>定义</th>
<th>范围&#x2F;特点</th>
</tr>
</thead>
<tbody><tr>
<td>公有地址</td>
<td>需向ISP申请，全球唯一，可在Internet路由</td>
<td>无固定范围，如202.103.0.0&#x2F;24</td>
</tr>
<tr>
<td>私有地址</td>
<td>仅用于内部网络，不可在Internet路由，免费使用</td>
<td>3个预留网段：<br>- 10.0.0.0<del>10.255.255.255<br>- 172.16.0.0</del>172.31.255.255<br>- 192.168.0.0~192.168.255.255</td>
</tr>
</tbody></table>
<h4 id="1-2-2-NAT术语"><a href="#1-2-2-NAT术语" class="headerlink" title="1.2.2 NAT术语"></a>1.2.2 NAT术语</h4><table>
<thead>
<tr>
<th>术语</th>
<th>含义</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>内部本地地址</td>
<td>内网设备的私网IP（未转换前）</td>
<td>192.168.1.1（PC1的私网IP）</td>
</tr>
<tr>
<td>内部全局地址</td>
<td>用于替代内部本地地址的公网IP（转换后）</td>
<td>12.1.1.10（映射192.168.1.1的公网IP）</td>
</tr>
<tr>
<td>外部全局地址</td>
<td>外网设备的公网IP（从内网视角）</td>
<td>203.0.113.1（互联网服务器公网IP）</td>
</tr>
<tr>
<td>外部本地地址</td>
<td>外网设备的私网IP（从内网视角）</td>
<td>192.168.5.1（外网企业内部的私网IP）</td>
</tr>
</tbody></table>
<h3 id="1-3-NAT核心优势"><a href="#1-3-NAT核心优势" class="headerlink" title="1.3 NAT核心优势"></a>1.3 NAT核心优势</h3><ol>
<li><strong>节省公有地址</strong>：多台私网设备可共用一个或多个公网IP访问外网，降低地址采购成本。</li>
<li><strong>提升网络安全性</strong>：对外隐藏私网IP，避免外网直接攻击内网设备。</li>
</ol>
<h3 id="1-4-NAT分类与配置"><a href="#1-4-NAT分类与配置" class="headerlink" title="1.4 NAT分类与配置"></a>1.4 NAT分类与配置</h3><h4 id="1-4-1-1-静态NAT（一对一映射）"><a href="#1-4-1-1-静态NAT（一对一映射）" class="headerlink" title="1.4.1 1. 静态NAT（一对一映射）"></a>1.4.1 1. 静态NAT（一对一映射）</h4><ul>
<li><strong>核心特点</strong>：私网IP与公网IP固定绑定，不节省地址，但支持外网访问内网服务器（如Telnet、FTP服务器）。</li>
<li><strong>适用场景</strong>：发布内网服务器（需外网通过固定公网IP访问）。</li>
<li><strong>配置示例（华为设备，路由器R1）</strong>：<ul>
<li>场景：将内网服务器（192.168.1.3）的Telnet（23端口）、FTP（21端口）映射到公网IP 12.1.1.10的对应端口。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 端口级静态映射（推荐，仅开放特定服务）</span><br><span class="line">[R1-GigabitEthernet0/0/1]nat static protocol tcp global 12.1.1.10 23 inside 192.168.1.3 23  // Telnet服务映射</span><br><span class="line">[R1-GigabitEthernet0/0/1]nat static protocol tcp global 12.1.1.10 21 inside 192.168.1.3 21  // FTP服务映射</span><br><span class="line"></span><br><span class="line">// 地址级静态映射（不推荐，开放所有服务）</span><br><span class="line">// [R1-GigabitEthernet0/0/1]nat static global 12.1.1.10 inside 192.168.1.3</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><strong>验证命令</strong>：<code>[R1]display nat static</code>（查看静态NAT映射表）。</li>
</ul>
<h4 id="1-4-2-2-动态NAT（多对多映射）"><a href="#1-4-2-2-动态NAT（多对多映射）" class="headerlink" title="1.4.2 2. 动态NAT（多对多映射）"></a>1.4.2 2. 动态NAT（多对多映射）</h4><ul>
<li><strong>核心特点</strong>：私网IP从公网地址池动态获取映射，地址池容量决定同时访问外网的最大设备数。</li>
<li><strong>适用场景</strong>：私网设备数量较少，公网地址相对充足的场景。</li>
<li><strong>配置步骤（华为设备）</strong>：<ol>
<li><strong>定义允许转换的私网流量（ACL）</strong>：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[R1]acl 2000  // 创建基本ACL</span><br><span class="line">[R1-acl-basic-2000]rule permit source 192.168.1.0 0.0.0.255  // 允许192.168.1.0/24网段</span><br></pre></td></tr></table></figure></li>
<li><strong>创建公网地址池</strong>：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[R1]nat address-group 1 12.1.1.10 12.1.1.20  // 地址池1：12.1.1.10~12.1.1.20（11个公网IP）</span><br></pre></td></tr></table></figure></li>
<li><strong>在公网接口应用动态NAT</strong>：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[R1]interface GigabitEthernet0/0/1  // 连接外网的接口（公网IP：12.1.1.1）</span><br><span class="line">[R1-GigabitEthernet0/0/1]nat outbound 2000 address-group 1 no-pat  // no-pat：仅地址转换，不做端口映射</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<h4 id="1-4-3-3-NAPT（端口地址转换，多对一）"><a href="#1-4-3-3-NAPT（端口地址转换，多对一）" class="headerlink" title="1.4.3 3. NAPT（端口地址转换，多对一）"></a>1.4.3 3. NAPT（端口地址转换，多对一）</h4><ul>
<li><strong>核心特点</strong>：多台私网设备映射到<strong>同一个公网IP的不同端口</strong>，大幅节省公网地址（最常用）。</li>
<li><strong>适用场景</strong>：中小型企业、家庭网络（私网设备多，公网IP少）。</li>
<li><strong>配置示例</strong>：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[R1]acl 2000</span><br><span class="line">[R1-acl-basic-2000]rule permit source 192.168.1.0 0.0.0.255</span><br><span class="line">[R1]interface GigabitEthernet0/0/1</span><br><span class="line">[R1-GigabitEthernet0/0/1]nat outbound 2000  // 省略address-group，默认使用接口公网IP+端口映射</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="1-4-4-4-Easy-IP（简化版NAPT）"><a href="#1-4-4-4-Easy-IP（简化版NAPT）" class="headerlink" title="1.4.4 4. Easy IP（简化版NAPT）"></a>1.4.4 4. Easy IP（简化版NAPT）</h4><ul>
<li><strong>核心特点</strong>：无需创建公网地址池，直接将私网IP转换为<strong>网关出接口的公网IP</strong>（出接口IP动态获取时也适用，如拨号上网）。</li>
<li><strong>适用场景</strong>：小型网络（如家庭、SOHO），网关出接口使用动态公网IP。</li>
<li><strong>配置与NAPT一致</strong>（同1.4.3的配置）。</li>
</ul>
<h3 id="1-5-环境准备（内网服务器配置）"><a href="#1-5-环境准备（内网服务器配置）" class="headerlink" title="1.5 环境准备（内网服务器配置）"></a>1.5 环境准备（内网服务器配置）</h3><p>如需验证NAT对服务器的发布功能，需先在内部服务器（如路由器R3）配置Telnet和FTP服务：</p>
<h4 id="1-5-1-Telnet配置"><a href="#1-5-1-Telnet配置" class="headerlink" title="1.5.1 Telnet配置"></a>1.5.1 Telnet配置</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[R3]user-interface vty 0 4  // 允许5个并发Telnet连接</span><br><span class="line">[R3-ui-vty0-4]authentication-mode password  // 密码认证</span><br><span class="line">Please configure the login password (maximum length 16):123456  // 配置登录密码</span><br></pre></td></tr></table></figure>

<h4 id="1-5-2-FTP配置"><a href="#1-5-2-FTP配置" class="headerlink" title="1.5.2 FTP配置"></a>1.5.2 FTP配置</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[R3]ftp server enable  // 启用FTP服务</span><br><span class="line">[R3]set default ftp-directory flash:/  // 设置FTP默认目录（设备闪存）</span><br><span class="line">[R3]aaa  // 进入AAA视图配置FTP用户</span><br><span class="line">[R3-aaa]local-user admin password cipher 123456  // 创建用户admin，密码加密存储</span><br><span class="line">[R3-aaa]local-user admin service-type ftp  // 服务类型为FTP</span><br><span class="line">[R3-aaa]local-user admin ftp-directory flash:/  // 限制FTP访问目录</span><br><span class="line">[R3-aaa]local-user admin access-limit 200  // 最大并发连接200</span><br><span class="line">[R3-aaa]local-user admin idle-timeout 0 0  // 空闲永不超时</span><br></pre></td></tr></table></figure>


<h2 id="二、ACL（访问控制列表）"><a href="#二、ACL（访问控制列表）" class="headerlink" title="二、ACL（访问控制列表）"></a>二、ACL（访问控制列表）</h2><h3 id="2-1-核心定义与作用"><a href="#2-1-核心定义与作用" class="headerlink" title="2.1 核心定义与作用"></a>2.1 核心定义与作用</h3><p>ACL（Access Control List，访问控制列表）是通过定义规则对数据包进行<strong>分类与过滤</strong>的技术，核心作用包括：</p>
<ul>
<li>控制网络访问（如拒绝某网段访问外网）。</li>
<li>限制特定服务（如禁止Telnet、Ping）。</li>
<li>配合NAT、QoS等功能（如指定某网段使用特定公网地址池）。</li>
</ul>
<h3 id="2-2-ACL分类与适用场景"><a href="#2-2-ACL分类与适用场景" class="headerlink" title="2.2 ACL分类与适用场景"></a>2.2 ACL分类与适用场景</h3><table>
<thead>
<tr>
<th>ACL类型</th>
<th>编号范围</th>
<th>匹配参数</th>
<th>适用场景</th>
<th>应用原则</th>
</tr>
</thead>
<tbody><tr>
<td>基本ACL</td>
<td>2000-2999</td>
<td>仅源IP地址</td>
<td>简单过滤（如拒绝192.168.1.0&#x2F;24访问外网）</td>
<td><strong>离目标最近</strong>，应用在出接口（outbound方向）</td>
</tr>
<tr>
<td>高级ACL</td>
<td>3000-3999</td>
<td>源IP、目的IP、协议（TCP&#x2F;UDP&#x2F;ICMP）、端口</td>
<td>精细过滤（如仅允许192.168.1.2访问Telnet服务）</td>
<td><strong>离源最近</strong>，应用在入接口（inbound方向）</td>
</tr>
<tr>
<td>二层ACL</td>
<td>4000-4999</td>
<td>源MAC、目的MAC、以太帧类型</td>
<td>二层网络过滤（如禁止某PC访问交换机）</td>
<td>应用在接入层交换机接口</td>
</tr>
<tr>
<td>用户自定义ACL</td>
<td>5000-5999</td>
<td>自定义匹配字段（如IP报文头部字段）</td>
<td>特殊场景（如根据TTL值过滤）</td>
<td>按需选择接口与方向</td>
</tr>
</tbody></table>
<h3 id="2-3-ACL核心规则"><a href="#2-3-ACL核心规则" class="headerlink" title="2.3 ACL核心规则"></a>2.3 ACL核心规则</h3><ol>
<li><strong>匹配顺序</strong>：按规则编号（rule-id）从小到大匹配，<strong>一旦匹配立即终止</strong>（不检查后续规则）。</li>
<li><strong>默认动作</strong>：所有ACL隐含“拒绝所有未匹配数据包”的规则（需手动添加<code>permit any</code>允许其他流量）。</li>
<li><strong>规则步长</strong>：默认步长为5（规则编号5、10、15…），可通过<code>step 2</code>调整，方便插入中间规则。</li>
</ol>
<h3 id="2-4-典型实验配置"><a href="#2-4-典型实验配置" class="headerlink" title="2.4 典型实验配置"></a>2.4 典型实验配置</h3><h4 id="2-4-1-实验一：基本ACL（拒绝192-168-1-0-24访问192-168-3-0-24）"><a href="#2-4-1-实验一：基本ACL（拒绝192-168-1-0-24访问192-168-3-0-24）" class="headerlink" title="2.4.1 实验一：基本ACL（拒绝192.168.1.0&#x2F;24访问192.168.3.0&#x2F;24）"></a>2.4.1 实验一：基本ACL（拒绝192.168.1.0&#x2F;24访问192.168.3.0&#x2F;24）</h4><ul>
<li><strong>拓扑</strong>：内网192.168.1.0&#x2F;24（生产区）、192.168.3.0&#x2F;24（财务部），通过路由器AR7连接。</li>
<li><strong>配置思路</strong>：基本ACL离目标近，应用在AR7的G0&#x2F;0&#x2F;0接口（连接财务部，出方向）。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 1. 创建基本ACL 2000</span><br><span class="line">[AR7]acl 2000</span><br><span class="line">[AR7-acl-basic-2000]rule 1 deny source 192.168.1.0 0.0.0.255  // 拒绝生产区网段</span><br><span class="line">[AR7-acl-basic-2000]rule 2 permit source any  // 允许其他所有流量（避免隐含拒绝影响其他业务）</span><br><span class="line"></span><br><span class="line">// 2. 应用到接口</span><br><span class="line">[AR7]interface GigabitEthernet0/0/0  // 连接财务部的接口（目标网段侧）</span><br><span class="line">[AR7-GigabitEthernet0/0/0]traffic-filter outbound acl 2000  // 出方向应用（从AR7到财务部）</span><br><span class="line"></span><br><span class="line">// 3. 查看与修改</span><br><span class="line">[AR7]display acl all  // 查看所有ACL规则</span><br><span class="line">[AR7-acl-basic-2000]undo rule 2  // 删除规则2</span><br><span class="line">[AR7-acl-basic-2000]step 2  // 调整规则步长为2（后续规则编号2、4、6...）</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="2-4-2-实验二：高级ACL（控制Telnet访问，仅允许192-168-1-2访问）"><a href="#2-4-2-实验二：高级ACL（控制Telnet访问，仅允许192-168-1-2访问）" class="headerlink" title="2.4.2 实验二：高级ACL（控制Telnet访问，仅允许192.168.1.2访问）"></a>2.4.2 实验二：高级ACL（控制Telnet访问，仅允许192.168.1.2访问）</h4><ul>
<li><strong>拓扑</strong>：路由器AR1提供Telnet服务（IP：192.168.1.1），仅允许PC2（192.168.1.2）访问。</li>
<li><strong>配置思路</strong>：高级ACL离源近，应用在AR1的G0&#x2F;0&#x2F;0接口（接入PC侧，入方向）。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">// 1. 配置AR1的Telnet服务</span><br><span class="line">[AR1]user-interface vty 0 4</span><br><span class="line">[AR1-ui-vty0-4]authentication-mode password</span><br><span class="line">Please configure the login password (maximum length 16):123456</span><br><span class="line"></span><br><span class="line">// 2. 创建高级ACL 3000</span><br><span class="line">[AR1]acl 3000</span><br><span class="line">// 允许192.168.1.2访问AR1的Telnet（23端口）</span><br><span class="line">[AR1-acl-adv-3000]rule 1 permit tcp source 192.168.1.2 0 destination 192.168.1.1 0 destination-port eq 23</span><br><span class="line">// 拒绝其他所有设备访问Telnet</span><br><span class="line">[AR1-acl-adv-3000]rule 2 deny tcp source any destination 192.168.1.1 0 destination-port eq 23</span><br><span class="line">// 允许其他所有IP流量</span><br><span class="line">[AR1-acl-adv-3000]rule 3 permit ip source any destination any</span><br><span class="line"></span><br><span class="line">// 3. 应用到接口</span><br><span class="line">[AR1]interface GigabitEthernet0/0/0  // 接入PC的接口（源侧）</span><br><span class="line">[AR1-GigabitEthernet0/0/0]traffic-filter inbound acl 3000  // 入方向应用（从PC到AR1）</span><br><span class="line"></span><br><span class="line">// 简化配置（用基本ACL绑定VTY）</span><br><span class="line">// [AR1]acl 2000</span><br><span class="line">// [AR1-acl-basic-2000]rule permit source 192.168.1.2 0</span><br><span class="line">// [AR1-ui-vty0-4]acl 2000 inbound  // 直接在VTY界面应用ACL</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="2-4-3-实验三：高级ACL（单向禁Ping，禁止192-168-1-1-Ping-192-168-1-2）"><a href="#2-4-3-实验三：高级ACL（单向禁Ping，禁止192-168-1-1-Ping-192-168-1-2）" class="headerlink" title="2.4.3 实验三：高级ACL（单向禁Ping，禁止192.168.1.1 Ping 192.168.1.2）"></a>2.4.3 实验三：高级ACL（单向禁Ping，禁止192.168.1.1 Ping 192.168.1.2）</h4><ul>
<li><strong>原理</strong>：Ping基于ICMP协议，<code>echo</code>（请求）报文对应Ping发起，<code>echo-reply</code>（响应）对应Ping回复，仅禁止<code>echo</code>报文即可实现单向禁Ping。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[AR1]acl 3000</span><br><span class="line">// 拒绝192.168.1.1发送的ICMP echo报文（Ping请求）</span><br><span class="line">[AR1-acl-adv-3000]rule 1 deny icmp source 192.168.1.1 0 destination 192.168.1.2 0 icmp-type echo</span><br><span class="line">[AR1-acl-adv-3000]rule 2 permit ip source any destination any</span><br><span class="line">[AR1]interface GigabitEthernet0/0/0</span><br><span class="line">[AR1-GigabitEthernet0/0/0]traffic-filter inbound acl 3000</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="2-4-4-实验四：基于时间的ACL（工作时间禁止财务部访问外网）"><a href="#2-4-4-实验四：基于时间的ACL（工作时间禁止财务部访问外网）" class="headerlink" title="2.4.4 实验四：基于时间的ACL（工作时间禁止财务部访问外网）"></a>2.4.4 实验四：基于时间的ACL（工作时间禁止财务部访问外网）</h4><ul>
<li><strong>需求</strong>：工作日（周一至周五）9:00-12:30、14:00-18:30，禁止192.168.3.0&#x2F;24（财务部）访问外网。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// 1. 配置时间范围</span><br><span class="line">[AR7]time-range work 9:00 to 12:30 working-day  // 工作日9:00-12:30</span><br><span class="line">[AR7]time-range work 14:00 to 18:30 working-day  // 工作日14:00-18:30</span><br><span class="line"></span><br><span class="line">// 2. 创建基本ACL并绑定时间范围</span><br><span class="line">[AR7]acl 2000</span><br><span class="line">[AR7-acl-basic-2000]rule 1 deny source 192.168.3.0 0.0.0.255 time-range work  // 工作时间拒绝</span><br><span class="line">[AR7-acl-basic-2000]rule 2 permit source any</span><br><span class="line"></span><br><span class="line">// 3. 应用到外网接口（出方向）</span><br><span class="line">[AR7]interface GigabitEthernet0/0/1  // 连接外网的接口</span><br><span class="line">[AR7-GigabitEthernet0/0/1]traffic-filter outbound acl 2000</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="2-4-5-实验五：二层ACL（禁止特定MAC地址的PC访问）"><a href="#2-4-5-实验五：二层ACL（禁止特定MAC地址的PC访问）" class="headerlink" title="2.4.5 实验五：二层ACL（禁止特定MAC地址的PC访问）"></a>2.4.5 实验五：二层ACL（禁止特定MAC地址的PC访问）</h4><ul>
<li><strong>需求</strong>：禁止MAC地址为5489-9801-1685的PC接入网络。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[LSW1]acl 4000  // 创建二层ACL</span><br><span class="line">[LSW1-acl-L2-4000]rule 1 deny source-mac 5489-9801-1685  // 拒绝目标MAC</span><br><span class="line">[LSW1]interface GigabitEthernet0/0/1  // PC接入的交换机接口</span><br><span class="line">[LSW1-GigabitEthernet0/0/1]traffic-filter inbound acl 4000  // 入方向应用</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-5-关键验证命令"><a href="#2-5-关键验证命令" class="headerlink" title="2.5 关键验证命令"></a>2.5 关键验证命令</h3><table>
<thead>
<tr>
<th>功能需求</th>
<th>命令</th>
</tr>
</thead>
<tbody><tr>
<td>查看所有ACL规则</td>
<td><code>display acl all</code></td>
</tr>
<tr>
<td>查看ACL应用接口</td>
<td>&#96;display traffic-filter applied-record</td>
</tr>
</tbody></table>
<h1 id="操作配置"><a href="#操作配置" class="headerlink" title="操作配置"></a>操作配置</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">ACL（访问控制列表）的配置：</span><br><span class="line"></span><br><span class="line">1.ACL（也可以理解为规则集）的分类</span><br><span class="line">基本ACL（2000-2999）：源IP地址等，离目标最近的端口，方向为out</span><br><span class="line">高级ACL（3000-3999）：源IP地址、目的IP地址、 源端口、目的端口等,离源最近的端口，方向为in</span><br><span class="line">二层ACL（4000-4999）：源MAC地址、目的MAC地址、以太帧协议类型等</span><br><span class="line">用户自定义（5000~5999）</span><br><span class="line">2.ACL的两个动作</span><br><span class="line">  permit:允许</span><br><span class="line">  deny：拒绝</span><br><span class="line">3.ACL的两个方向</span><br><span class="line">  inbound:进站</span><br><span class="line">  outbound：出站</span><br><span class="line">3.ACL的规则</span><br><span class="line">（1）从上至下，一旦匹配立即终止，没有匹配，不进行任何处理。</span><br><span class="line">（2）ARG3系列路由器支持两种匹配顺序：配置顺序和自动排序。</span><br><span class="line">     配置顺序：按ACL规则编号（rule-id）从小到大的顺序进行匹配。</span><br><span class="line">     自动排序：使用“深度优先”的原则进行匹配，即根据规则的精确度排序。</span><br><span class="line">3.ACL的配置</span><br><span class="line">  配置方式有两种：编号方式与命名方式</span><br><span class="line"></span><br><span class="line">实验一：基本ACL的配置【拒绝192.168.1.0网段访问3.0网段】</span><br><span class="line">        只匹配源地址，应用在离目标最近的端口方向为out,所以ACL应该做在AR7上，应用在G0/0/0端口  </span><br><span class="line">        上，方向为OUT</span><br><span class="line">[Huawei]acl 2000</span><br><span class="line">[Huawei-acl-basic-2000]rule 1 deny source 192.168.1.0 0.0.0.255 </span><br><span class="line">[Huawei-acl-basic-2000]rule 2 permit source any </span><br><span class="line">[Huawei]display acl all   查看ACL规则</span><br><span class="line">[Huawei]interface g0/0/0</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]traffic-filter outbound acl 2000   应用ACL规则</span><br><span class="line">[Huawei]acl 2000</span><br><span class="line">[Huawei-acl-basic-2000]undo rule 2   删除ACL规则</span><br><span class="line">[Huawei-acl-basic-2000]step 2  配置ACL规则步长，默认为5，可以在中间插入规则</span><br><span class="line"></span><br><span class="line">实验二：高级ACL的配置【控制telnet访问】</span><br><span class="line">        分析：即过滤源地址，又要对目标的服务（端口）进行检查，所以用高级ACL</span><br><span class="line">              高级ACL应该做在离源最的端口上，方向为IN</span><br><span class="line">              所以应该在AR3上做ACL，应用在G0/0/0端口，方向为in</span><br><span class="line">（1）AR1上配置telnet访问：</span><br><span class="line">     [Huawei]user-interface vty 0 4</span><br><span class="line">     [Huawei-ui-vty0-4]authentication-mode password </span><br><span class="line">     Please configure the login password (maximum length 16):123456</span><br><span class="line">（2）AR1上配置ACL</span><br><span class="line">    [R1]acl 3000</span><br><span class="line">    [R1-acl-adv-3000]rule permit tcp source 192.168.1.2 0 destination 192.168.1.1 0 </span><br><span class="line">    destination-port eq 23</span><br><span class="line">    [R1-acl-adv-3000]rule deny tcp source any destination 192.168.1.1 0 destination-</span><br><span class="line">    port eq 23</span><br><span class="line">    [R1-acl-adv-3000]rule permit ip source any destination any </span><br><span class="line">    [R1-GigabitEthernet0/0/0]traffic-filter inbound acl 3000</span><br><span class="line"></span><br><span class="line">    同时也可以使用基本ACL实现telnet访问控制 </span><br><span class="line">    [R1]acl 2000</span><br><span class="line">    [R1-acl-basic-2000]rule permit source 192.168.1.2 0</span><br><span class="line">    [R1]user-interface vty 0 4</span><br><span class="line">    [R1-ui-vty0-4]acl 2000 inbound </span><br><span class="line"></span><br><span class="line">实验三：配置ACL单向禁ping</span><br><span class="line">    [Huawei-acl-adv-3000]rule deny icmp source 192.168.1.1 0 destination 192.168.1.2</span><br><span class="line">    54 0 icmp-type echo</span><br><span class="line">    [Huawei-acl-adv-3000]rule permit ip source any destination any</span><br><span class="line">    [Huawei]int g0/0/0</span><br><span class="line">    [Huawei-GigabitEthernet0/0/0]traffic-filter inbound acl 3000</span><br><span class="line"></span><br><span class="line">实验四：基于时间的ACL</span><br><span class="line">   （1）配置时间</span><br><span class="line">    [Huawei]time-range work 9:00 to 12:30 working-day </span><br><span class="line">    [Huawei]time-range work 14:00 to 18:30 working-day</span><br><span class="line">   （2）配置ACL</span><br><span class="line">    [Huawei-acl-basic-2000]rule deny source 192.168.3.0 0.0.0.255 time-range work</span><br><span class="line">   （3）将ACL应用到端口</span><br><span class="line">    [Huawei-GigabitEthernet0/0/0]traffic-filter outbound acl 2000</span><br><span class="line"></span><br><span class="line">实验五：二层ACL的配置</span><br><span class="line">    [Huawei]acl 4000</span><br><span class="line">    [Huawei-acl-L2-4000]rule deny source-mac 5489-9801-1685</span><br><span class="line">    [Huawei]int g0/0/1    </span><br><span class="line">    [Huawei-GigabitEthernet0/0/1]traffic-filter inbound acl 4000</span><br><span class="line">    </span><br><span class="line">    思考:其实配置ACL规则是非常复杂的，我们需要对数据的流向非常清楚，对常见的协议要非常清楚。</span><br><span class="line">     如：指定时间不能上QQ，指定时间不能看爱奇艺视频？不能使用迅雷等下载工具等等。</span><br><span class="line">     请大家下来除了掌握ACL的基本配置外，还需要掌握具真实场景的ACL应用。</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20250903160900609.png" alt="image-20250903160900609"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20250903160911702.png" alt="image-20250903160911702"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">配置telnet </span><br><span class="line">使用AR1\AR2能telnet AR3进行远程管理</span><br><span class="line">[AR3]user-interface vty 0 4</span><br><span class="line">[AR3-ui-vty0-4]authentication-mode password</span><br><span class="line">Please configure the login password (maximum length 16):123456</span><br><span class="line"></span><br><span class="line">telnet服务对应的端口号？TCP/23</span><br><span class="line">要求： 拒绝AR1  允许AR2对AR3进行telnet</span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20250903161000592.png" alt="image-20250903161000592"></p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/./assets/lbxw.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/./assets/lbxw.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">蜡笔小王</div><div class="post-copyright__author_desc">不想学习啊！！！</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://wjh0527.github.io.git/2025/09/03/acl-nat/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://wjh0527.github.io.git/2025/09/03/acl-nat/')">acl+nat</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/null" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/null" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://wjh0527.github.io.git/2025/09/03/acl-nat/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=acl+nat&amp;url=https://wjh0527.github.io.git/2025/09/03/acl-nat/&amp;pic=" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://wjh0527.github.io.git" target="_blank">蜡笔小王的博客</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>网络基础<span class="tagsPageCount">20</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="/./assets/lbxw.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/09/03/%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E5%8D%8F%E8%AE%AE/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">网络管理协议</div></div></a></div><div class="next-post pull-right"><a href="/2025/09/03/DHCP/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">DHCP</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2025/09/03/DHCP/" title="DHCP"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-03</div><div class="title">DHCP</div></div></a></div><div><a href="/2025/09/03/Firewall/" title="Firewall"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-03</div><div class="title">Firewall</div></div></a></div><div><a href="/2025/09/04/OSPF/" title="OSPF"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-04</div><div class="title">OSPF</div></div></a></div><div><a href="/2025/09/03/GVRP/" title="GVRP"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-03</div><div class="title">GVRP</div></div></a></div><div><a href="/2025/09/04/RIP/" title="RIP"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-04</div><div class="title">RIP</div></div></a></div><div><a href="/2025/09/03/VLAN%E6%8A%80%E6%9C%AF/" title="VLAN技术"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-03</div><div class="title">VLAN技术</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/./assets/lbxw.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description"></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content">别看了，去玩会吧</div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(null) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#NAT%E4%B8%8EACL%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0"><span class="toc-number">1.</span> <span class="toc-text">NAT与ACL技术学习笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81NAT%EF%BC%88%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2%EF%BC%89"><span class="toc-number">1.1.</span> <span class="toc-text">一、NAT（网络地址转换）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E6%A0%B8%E5%BF%83%E5%AE%9A%E4%B9%89%E4%B8%8E%E4%BB%B7%E5%80%BC"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1 核心定义与价值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E5%85%B3%E9%94%AE%E6%A6%82%E5%BF%B5%E4%B8%8E%E5%9C%B0%E5%9D%80%E5%88%86%E7%B1%BB"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.2 关键概念与地址分类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-1-%E5%9C%B0%E5%9D%80%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.1.2.1.</span> <span class="toc-text">1.2.1 地址类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-2-NAT%E6%9C%AF%E8%AF%AD"><span class="toc-number">1.1.2.2.</span> <span class="toc-text">1.2.2 NAT术语</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-NAT%E6%A0%B8%E5%BF%83%E4%BC%98%E5%8A%BF"><span class="toc-number">1.1.3.</span> <span class="toc-text">1.3 NAT核心优势</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-NAT%E5%88%86%E7%B1%BB%E4%B8%8E%E9%85%8D%E7%BD%AE"><span class="toc-number">1.1.4.</span> <span class="toc-text">1.4 NAT分类与配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-1-1-%E9%9D%99%E6%80%81NAT%EF%BC%88%E4%B8%80%E5%AF%B9%E4%B8%80%E6%98%A0%E5%B0%84%EF%BC%89"><span class="toc-number">1.1.4.1.</span> <span class="toc-text">1.4.1 1. 静态NAT（一对一映射）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-2-2-%E5%8A%A8%E6%80%81NAT%EF%BC%88%E5%A4%9A%E5%AF%B9%E5%A4%9A%E6%98%A0%E5%B0%84%EF%BC%89"><span class="toc-number">1.1.4.2.</span> <span class="toc-text">1.4.2 2. 动态NAT（多对多映射）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-3-3-NAPT%EF%BC%88%E7%AB%AF%E5%8F%A3%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2%EF%BC%8C%E5%A4%9A%E5%AF%B9%E4%B8%80%EF%BC%89"><span class="toc-number">1.1.4.3.</span> <span class="toc-text">1.4.3 3. NAPT（端口地址转换，多对一）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-4-4-Easy-IP%EF%BC%88%E7%AE%80%E5%8C%96%E7%89%88NAPT%EF%BC%89"><span class="toc-number">1.1.4.4.</span> <span class="toc-text">1.4.4 4. Easy IP（简化版NAPT）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87%EF%BC%88%E5%86%85%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE%EF%BC%89"><span class="toc-number">1.1.5.</span> <span class="toc-text">1.5 环境准备（内网服务器配置）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-5-1-Telnet%E9%85%8D%E7%BD%AE"><span class="toc-number">1.1.5.1.</span> <span class="toc-text">1.5.1 Telnet配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-5-2-FTP%E9%85%8D%E7%BD%AE"><span class="toc-number">1.1.5.2.</span> <span class="toc-text">1.5.2 FTP配置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81ACL%EF%BC%88%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8%EF%BC%89"><span class="toc-number">1.2.</span> <span class="toc-text">二、ACL（访问控制列表）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E6%A0%B8%E5%BF%83%E5%AE%9A%E4%B9%89%E4%B8%8E%E4%BD%9C%E7%94%A8"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 核心定义与作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-ACL%E5%88%86%E7%B1%BB%E4%B8%8E%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2 ACL分类与适用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-ACL%E6%A0%B8%E5%BF%83%E8%A7%84%E5%88%99"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.3 ACL核心规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E5%85%B8%E5%9E%8B%E5%AE%9E%E9%AA%8C%E9%85%8D%E7%BD%AE"><span class="toc-number">1.2.4.</span> <span class="toc-text">2.4 典型实验配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-1-%E5%AE%9E%E9%AA%8C%E4%B8%80%EF%BC%9A%E5%9F%BA%E6%9C%ACACL%EF%BC%88%E6%8B%92%E7%BB%9D192-168-1-0-24%E8%AE%BF%E9%97%AE192-168-3-0-24%EF%BC%89"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">2.4.1 实验一：基本ACL（拒绝192.168.1.0&#x2F;24访问192.168.3.0&#x2F;24）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-2-%E5%AE%9E%E9%AA%8C%E4%BA%8C%EF%BC%9A%E9%AB%98%E7%BA%A7ACL%EF%BC%88%E6%8E%A7%E5%88%B6Telnet%E8%AE%BF%E9%97%AE%EF%BC%8C%E4%BB%85%E5%85%81%E8%AE%B8192-168-1-2%E8%AE%BF%E9%97%AE%EF%BC%89"><span class="toc-number">1.2.4.2.</span> <span class="toc-text">2.4.2 实验二：高级ACL（控制Telnet访问，仅允许192.168.1.2访问）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-3-%E5%AE%9E%E9%AA%8C%E4%B8%89%EF%BC%9A%E9%AB%98%E7%BA%A7ACL%EF%BC%88%E5%8D%95%E5%90%91%E7%A6%81Ping%EF%BC%8C%E7%A6%81%E6%AD%A2192-168-1-1-Ping-192-168-1-2%EF%BC%89"><span class="toc-number">1.2.4.3.</span> <span class="toc-text">2.4.3 实验三：高级ACL（单向禁Ping，禁止192.168.1.1 Ping 192.168.1.2）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-4-%E5%AE%9E%E9%AA%8C%E5%9B%9B%EF%BC%9A%E5%9F%BA%E4%BA%8E%E6%97%B6%E9%97%B4%E7%9A%84ACL%EF%BC%88%E5%B7%A5%E4%BD%9C%E6%97%B6%E9%97%B4%E7%A6%81%E6%AD%A2%E8%B4%A2%E5%8A%A1%E9%83%A8%E8%AE%BF%E9%97%AE%E5%A4%96%E7%BD%91%EF%BC%89"><span class="toc-number">1.2.4.4.</span> <span class="toc-text">2.4.4 实验四：基于时间的ACL（工作时间禁止财务部访问外网）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-5-%E5%AE%9E%E9%AA%8C%E4%BA%94%EF%BC%9A%E4%BA%8C%E5%B1%82ACL%EF%BC%88%E7%A6%81%E6%AD%A2%E7%89%B9%E5%AE%9AMAC%E5%9C%B0%E5%9D%80%E7%9A%84PC%E8%AE%BF%E9%97%AE%EF%BC%89"><span class="toc-number">1.2.4.5.</span> <span class="toc-text">2.4.5 实验五：二层ACL（禁止特定MAC地址的PC访问）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-%E5%85%B3%E9%94%AE%E9%AA%8C%E8%AF%81%E5%91%BD%E4%BB%A4"><span class="toc-number">1.2.5.</span> <span class="toc-text">2.5 关键验证命令</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E9%85%8D%E7%BD%AE"><span class="toc-number">2.</span> <span class="toc-text">操作配置</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/04/Windows-server%E6%9C%8D%E5%8A%A1%E5%99%A8/" title="Windows-server服务器">Windows-server服务器</a><time datetime="2025-09-04T07:05:17.000Z" title="发表于 2025-09-04 15:05:17">2025-09-04</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/04/%E6%97%A0%E7%BA%BF%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF/" title="无线网络技术">无线网络技术</a><time datetime="2025-09-04T05:37:32.000Z" title="发表于 2025-09-04 13:37:32">2025-09-04</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/04/OSPF/" title="OSPF">OSPF</a><time datetime="2025-09-04T03:42:54.000Z" title="发表于 2025-09-04 11:42:54">2025-09-04</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/04/RIP/" title="RIP">RIP</a><time datetime="2025-09-04T03:38:46.000Z" title="发表于 2025-09-04 11:38:46">2025-09-04</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/04/ipsec%E5%92%8Cgre/" title="ipsec和gre">ipsec和gre</a><time datetime="2025-09-04T02:17:59.000Z" title="发表于 2025-09-04 10:17:59">2025-09-04</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"/></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2024 - 2025 By <a class="footer-bar-link" href="/" title="蜡笔小王" target="_blank">蜡笔小王</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">24</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">3</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">3</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="安知鱼的博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="安知鱼的博客"/><span class="back-menu-item-text">安知鱼的博客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/SQL%E6%B3%A8%E5%85%A5/" style="font-size: 0.88rem;">SQL注入<sup>2</sup></a><a href="/tags/windows/" style="font-size: 0.88rem;">windows<sup>1</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/" style="font-size: 0.88rem;">网络基础<sup>20</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.cbd.int/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (true){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("12/01/2024 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2024 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 蜡笔小王 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>