<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>网络通信 | 蜡笔小王的博客</title><meta name="keywords" content="网络基础"><meta name="author" content="蜡笔小王"><meta name="copyright" content="蜡笔小王"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="网络通信"><meta name="application-name" content="网络通信"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="网络通信"><meta property="og:url" content="https://wjh0527.github.io.git/2025/09/03/%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/index.html"><meta property="og:site_name" content="蜡笔小王的博客"><meta property="og:description" content="Web"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://wjh0527.github.io.git/assets/lbxw.jpg"><meta property="article:author" content="蜡笔小王"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://wjh0527.github.io.git/assets/lbxw.jpg"><meta name="description" content="Web"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://wjh0527.github.io.git/2025/09/03/%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="manifest" href="/manifest.json"/><meta name="msapplication-TileColor" content="var(--anzhiyu-main)"/><link rel="mask-icon" href="/img/siteicon/apple-icon-180.png" color="#5bbad5"/><link rel="apple-touch-icon" sizes="180x180" href="/img/siteicon/apple-icon-180.png"/><link rel="apple-touch-icon-precomposed" sizes="180x180" href="/img/siteicon/apple-icon-180.png"/><link rel="icon" type="image/png" sizes="32x32" href="/img/siteicon/32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/img/siteicon/16.png"/><link rel="bookmark" href="/img/siteicon/apple-icon-180.png"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-2732.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2732-2048.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2388.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2388-1668.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1536-2048.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-1536.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2224.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2224-1668.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1620-2160.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2160-1620.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1290-2796.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2796-1290.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1179-2556.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2556-1179.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1284-2778.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2778-1284.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1170-2532.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2532-1170.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1125-2436.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2436-1125.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2688.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2688-1242.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-828-1792.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1792-828.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2208.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2208-1242.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-750-1334.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1334-750.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-640-1136.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1136-640.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: {"enable":true,"title":"每天学习亿点点","addFriendPlaceholder":"昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"},
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2024/07/27/125766904/ba62475f396df9de3316a08ed9e65d86_5680958632268053399..png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: 蜡笔小王","link":"链接: ","source":"来源: 蜡笔小王的博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '蜡笔小王的博客',
  title: '网络通信',
  postAI: '',
  pageFillDescription: '网络通信, 一、TCPx2FIP协议基础与网络结构, （一）Internet核心结构组成, （二）IP地址分类与NAT技术, （三）TCPx2FIP协议栈结构, 各层关键说明：, （四）TCPx2FIP协议栈封包过程, 二、TCPx2FIP协议栈封包与路由原理, （一）典型封包结构（以HTTP请求为例）, （二）IP网络互连原理, 关键技术：, 三、TCPx2FIP协议安全缺陷与典型攻击, 四、典型攻击实施与防御（含实验验证）, （一）MAC泛洪攻击, 1. 攻击原理, 2. 实验验证（Kali Linux环境）, 实验拓扑, 实验步骤, 3. 防御措施网络通信一协议基础与网络结构一核心结构组成的架构围绕分层分布式设计确保数据在全球范围内高效传输核心组成部分包括自治系统的基本组成单位由互联网服务提供商或大型组织管理内部网络设备和路由策略相对独立通过骨干网与其他互联骨干网的主干道由高速光纤如地下光缆海底光缆和高性能路由器组成承担跨区域跨国家的大规模数据传输且具备冗余链路设计保障通信稳定性接入网络用户终端接入骨干网的桥梁常见类型包括局域网遵循标准如企业校园内部的有线网络通过交换机实现终端互联无线局域网基于技术为移动设备提供无线接入基于协议家庭用户通过电话线接入互联网的传统方式基础数据链路连接网络设备的物理链路除光纤外还包括以太网双绞线令牌环光纤分布式数据接口等不同链路对应不同的数据帧传输规则二地址分类与技术地址分类地址用于标识网络中的主机分为公有和私有私有仅在局域网内有效需通过转换为公有才能访问互联网具体分类范围如下类私有地址子网掩码默认适用于大型网络如大型企业运营商内部网络类私有地址子网掩码默认适用于中型网络如中小型企业校园类私有地址子网掩码默认适用于小型网络如家庭小型办公室技术网络地址转换核心功能是将局域网内的私有地址转换为公网的公有地址解决公有地址资源不足的问题其工作原理是路由器或防火墙在接收局域网主机的出站数据包时将源私有替换为自身的公有并记录私有端口与公有端口的映射关系当收到公网的响应数据包时再根据映射关系将目标替换为对应的私有转发给局域网主机三协议栈结构协议栈是实际网络通信中遵循的标准分为四层或五层与模型对应每层通过封装添加协议头实现数据传输具体层级及功能如下层级对应层级核心功能协议设备数据单位应用层应用层表示层会话层提供用户应用程序的网络接口如文件传输网页访问邮件发送等数据传输层传输层基于端口标识通信进程提供可靠或不可靠的数据传输服务分段数据报网络层互联层网络层基于地址实现跨网络的路由转发处理分片地址解析等数据报网络接口层数据链路层物理层定义物理传输介质如线缆接口和数据帧格式基于地址实现局域网内通信数据帧各层关键说明物理层网络接口层下属定义电压标准线缆类型如双绞线单模光纤接口规格如数据以比特流形式传输数据链路层网络接口层下属通过地址硬件地址如识别局域网内设备由交换机转发数据帧核心功能包括帧同步差错检测如校验网络层由路由器实现跨子网路由协议负责将地址解析为地址映射协议则通过地址反向获取地址协议用于传输网络控制消息如的请求响应路由重定向传输层协议通过三次握手建立连接序列号确认重传机制保障可靠性适用于文件传输网页加载等场景协议无连接无确认传输效率高适用于视频流语音通话查询等场景应用层整合表示层数据压缩加密解密如的加密和会话层建立维护通信会话如的会话管理功能直接对接用户应用如浏览器客户端四协议栈封包过程数据从应用层到网络接口层传输时会逐层添加对应协议头封装接收端则从网络接口层到应用层逐层剥离协议头解封装具体过程如下应用层用户应用程序生成原始数据如网页内容文件数据应用层协议如添加协议头如请求行响应头形成应用层数据传输层应用层数据传入传输层或协议添加传输层头含源端口目标端口序列号校验和等形成分段或数据报网络层传输层数据传入网络层协议添加头含源目标生存时间协议类型如校验和等形成数据报若数据报超过最大传输单元如默认字节则进行分片网络层接口层数据报传入网络接口层数据链路层添加帧头含源目标帧类型如表示数据报和帧尾校验字段形成数据帧物理层将数据帧转换为比特流通过物理介质传输接收端过程相反物理层接收比特流数据链路层校验帧尾剥离帧头尾网络层重组分片剥离头传输层校验端口确认序列号剥离传输层头应用层剥离应用层头将原始数据交给应用程序二协议栈封包与路由原理一典型封包结构以请求为例从底层到上层数据帧的完整结构如下以帧为例层级协议头尾字段示例网络接口层数据链路层帧头字节源客户端目标网关帧类型网络接口层数据链路层数据报含头字节分段头源客户端目标百度服务器协议传输层分段含头字节数据头源端口客户端随机端口目标端口默认端口序列号确认号建立连接阶段应用层数据含头网页请求数据请求行网络接口层数据链路层帧尾字节校验值用于检测帧传输错误二网络互连原理跨局域网通信如客户端访问公网服务器需通过路由器实现路由转发核心流程如下局域网内通信客户端如向同一子网内的主机如发送数据时通过协议查询的地址交换机根据地址表直接转发数据帧无需经过路由器跨子网通信客户端向公网服务器如百度发送数据时客户端判断目标与自身不在同一子网子网掩码与不在同一网段将数据发送至默认网关如路由器接口网关路由器接收数据帧后剥离帧头尾解析头中的目标查询路由表通过等路由协议生成确定下一跳路由器地址如运营商骨干网路由器数据通过多跳路由器转发最终到达目标服务器所在子网的路由器由该路由器将数据转发至目标服务器服务器响应数据按原路返回客户端过程相反关键技术地址解析局域网内主机通过广播请求谁是请回复地址目标主机单播响应我是地址是主机将映射存入缓存表通过查看路由协议边界网关协议用于之间的路由选择如不同之间的路由交互开放式最短路径优先用于内部的路由计算基于最短路径树选择最优路由三协议安全缺陷与典型攻击协议设计之初未充分考虑安全性各层级存在安全缺陷攻击者可利用这些缺陷发起攻击下表梳理各层级缺陷对应攻击技术及破坏的安全属性机密性完整性真实性可用性层级协议组件安全缺陷对应攻击技术破坏的安全属性网络接口层共享传输媒介数据明文传输缺乏身份认证网络嗅探抓包协议分析欺骗伪造地址机密性嗅探真实性欺骗网络接口层数据明文传输无加密机制网络嗅探协议分析机密性网络层互联层缺乏地址身份认证分片处理逻辑漏洞地址欺骗伪造源分片攻击如攻击导致目标设备分片重组崩溃真实性欺骗可用性分片攻击网络层互联层路由重定向无身份认证广播地址对的放大器效应路由重定向伪造路由消息篡改目标主机路由表大量请求耗尽目标带宽攻击利用广播放大流量完整性真实性路由重定向可用性网络层互联层请求响应无验证机制可伪造报文欺骗伪造网关或主机的响应篡改目标主机缓存表真实性可用性断网或流量劫持网络层互联层缺乏强身份认证路由更新报文可伪造路由欺骗攻击伪造路由消息篡改路由表导致流量劫持完整性真实性传输层三次握手存在连接队列瓶颈会话无强身份认证大量伪造请求耗尽服务器连接队列攻击伪造报文断开合法连接会话劫持窃取会话伪造会话数据可用性攻击真实性可用性会话劫持传输层无连接无确认可大量发送数据包大量数据包耗尽目标带宽或资源可用性应用层验证机制薄弱响应可伪造缓存无过期校验欺骗伪造响应篡改目标主机缓存缓存投毒向服务器注入错误解析记录完整性真实性应用层协议的认证机制存在漏洞如早期版本无加密中间人攻击拦截通信窃取认证凭据真实性可用性应用层明文传输缺乏完整性保护内嵌链接可被篡改钓鱼攻击伪造网页骗取用户账号密码网页木马攻击篡改页面植入恶意脚本完整性真实性四典型攻击实施与防御含实验验证一泛洪攻击攻击原理泛洪攻击针对局域网交换机利用交换机的地址学习和地址表老化机制交换机工作流程交换机维护一个地址表通常容量左右记录地址端口映射当接收数据帧时若目标在表中直接转发至对应端口若不在表中向所有端口广播泛洪该帧学习机制交换机接收数据帧时将帧的源地址与入端口号记录到表中若某地址长时间默认秒无通信交换机将其从表中删除老化攻击逻辑攻击者通过工具如伪造大量随机地址的数据包发送给交换机交换机持续学习这些虚假地址很快填满地址表此后正常主机的地址因表满无法添加交换机对所有数据帧进行广播攻击者可通过嗅探工具如捕获局域网内所有主机的通信数据如账号密码网页内容实验验证环境实验拓扑攻击机安装套件含工具目标主机需访问服务器目标服务器运行服务用户名密码网络设备局域网交换机连接三台设备实验步骤安装套件在终端执行命令安装嗅探与欺骗工具安装验证是否安装成功显示帮助信息则成功验证是否安装成功发起泛洪攻击在终端执行命令工具将自动生成大量伪造地址的数据包发送给交换机启动泛洪终端将持续输出伪造的地址与数据包信息启动嗅探在新终端执行选择网卡开始抓包过滤规则设为捕获通信目标主机访问服务器在中打开浏览器输入输入用户名密码登录分析嗅探结果在中停止抓包查看协议数据包可清晰看到用户名和密码的明文信息证明攻击成功交换机广播数据帧被嗅探捕获防御措施核心是限制交换机端口的地址数量防止表被填满关键技术为端口安全性',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-09-03 10:41:22',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="/./assets/lbxw.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="安知鱼的博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="安知鱼的博客"/><span class="back-menu-item-text">安知鱼的博客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">蜡笔小王的博客</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" alt="微信" src="/null"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="/null"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Linux/" style="font-size: 1.05rem;">Linux<sup>1</sup></a><a href="/tags/SQL%E6%B3%A8%E5%85%A5/" style="font-size: 1.05rem;">SQL注入<sup>2</sup></a><a href="/tags/windows/" style="font-size: 1.05rem;">windows<sup>1</sup></a><a href="/tags/%E6%BC%8F%E6%B4%9E/" style="font-size: 1.05rem;">漏洞<sup>1</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/" style="font-size: 1.05rem;">网络基础<sup>20</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/09/"><span class="card-archive-list-date">九月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">26</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/08/"><span class="card-archive-list-date">八月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/" itemprop="url">网络基础</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>网络基础</span></a></span></div></div><h1 class="post-title" itemprop="name headline">网络通信</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-09-03T02:40:32.000Z" title="发表于 2025-09-03 10:40:32">2025-09-03</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-09-03T02:41:22.975Z" title="更新于 2025-09-03 10:41:22">2025-09-03</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="网络通信"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为成都"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>成都</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src=""></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://wjh0527.github.io.git/2025/09/03/%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/"><header><a class="post-meta-categories" href="/categories/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/" itemprop="url">网络基础</a><a href="/tags/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/" tabindex="-1" itemprop="url">网络基础</a><h1 id="CrawlerTitle" itemprop="name headline">网络通信</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">蜡笔小王</span><time itemprop="dateCreated datePublished" datetime="2025-09-03T02:40:32.000Z" title="发表于 2025-09-03 10:40:32">2025-09-03</time><time itemprop="dateCreated datePublished" datetime="2025-09-03T02:41:22.975Z" title="更新于 2025-09-03 10:41:22">2025-09-03</time></header><h1 id="网络通信"><a href="#网络通信" class="headerlink" title="网络通信"></a>网络通信</h1><h2 id="一、TCP-IP协议基础与网络结构"><a href="#一、TCP-IP协议基础与网络结构" class="headerlink" title="一、TCP&#x2F;IP协议基础与网络结构"></a>一、TCP&#x2F;IP协议基础与网络结构</h2><h3 id="（一）Internet核心结构组成"><a href="#（一）Internet核心结构组成" class="headerlink" title="（一）Internet核心结构组成"></a>（一）Internet核心结构组成</h3><p>Internet的架构围绕“分层+分布式”设计，确保数据在全球范围内高效传输，核心组成部分包括：</p>
<ol>
<li><strong>自治系统（AS）</strong>：Internet的基本组成单位，由ISP（互联网服务提供商）或大型组织管理，内部网络设备和路由策略相对独立，通过骨干网与其他AS互联。</li>
<li><strong>骨干网（Backbone）</strong>：Internet的“主干道”，由高速光纤（如地下光缆、海底光缆）和高性能路由器组成，承担跨区域、跨国家的大规模数据传输，且具备冗余链路设计，保障通信稳定性。</li>
<li><strong>接入网络</strong>：用户终端接入骨干网的“桥梁”，常见类型包括：<ul>
<li>局域网（LAN，遵循802.3标准）：如企业、校园内部的有线网络，通过交换机实现终端互联。</li>
<li>无线局域网（WLAN）：基于Wi-Fi技术，为移动设备提供无线接入。</li>
<li>ADSL（基于PPP协议）：家庭用户通过电话线接入互联网的传统方式。</li>
</ul>
</li>
<li><strong>基础数据链路</strong>：连接网络设备的物理链路，除光纤外，还包括以太网双绞线、Token Ring（令牌环）、FDDI（光纤分布式数据接口）等，不同链路对应不同的数据帧传输规则。</li>
</ol>
<h3 id="（二）IP地址分类与NAT技术"><a href="#（二）IP地址分类与NAT技术" class="headerlink" title="（二）IP地址分类与NAT技术"></a>（二）IP地址分类与NAT技术</h3><ol>
<li><strong>IP地址分类</strong>：IP地址用于标识网络中的主机，分为公有IP和私有IP，私有IP仅在局域网内有效，需通过NAT转换为公有IP才能访问互联网，具体分类范围如下：<ul>
<li><strong>A类私有地址</strong>：10.0.0.0~10.255.255.255，子网掩码默认255.0.0.0，适用于大型网络（如大型企业、运营商内部网络）。</li>
<li><strong>B类私有地址</strong>：172.16.0.0~172.31.255.255，子网掩码默认255.255.0.0，适用于中型网络（如中小型企业、校园）。</li>
<li><strong>C类私有地址</strong>：192.168.0.0~192.168.255.255，子网掩码默认255.255.255.0，适用于小型网络（如家庭、小型办公室）。</li>
</ul>
</li>
<li><strong>NAT技术（网络地址转换）</strong>：核心功能是将局域网内的私有IP地址转换为公网的公有IP地址，解决公有IP地址资源不足的问题。其工作原理是：路由器或防火墙在接收局域网主机的出站数据包时，将源IP（私有IP）替换为自身的公有IP，并记录“私有IP:端口”与“公有IP:端口”的映射关系；当收到公网的响应数据包时，再根据映射关系将目标IP替换为对应的私有IP，转发给局域网主机。</li>
</ol>
<h3 id="（三）TCP-IP协议栈结构"><a href="#（三）TCP-IP协议栈结构" class="headerlink" title="（三）TCP&#x2F;IP协议栈结构"></a>（三）TCP&#x2F;IP协议栈结构</h3><p>TCP&#x2F;IP协议栈是实际网络通信中遵循的标准，分为四层（或五层，与OSI模型对应），每层通过封装（添加协议头）实现数据传输，具体层级及功能如下：</p>
<table>
<thead>
<tr>
<th>TCP&#x2F;IP层级</th>
<th>对应OSI层级</th>
<th>核心功能</th>
<th>协议&#x2F;设备</th>
<th>数据单位</th>
</tr>
</thead>
<tbody><tr>
<td>应用层</td>
<td>应用层+表示层+会话层</td>
<td>提供用户应用程序的网络接口，如文件传输、网页访问、邮件发送等</td>
<td>HTTP、FTP、SMTP、DNS、Telnet、SNMP</td>
<td>数据（Data）</td>
</tr>
<tr>
<td>传输层</td>
<td>传输层</td>
<td>基于端口标识通信进程，提供可靠（TCP）或不可靠（UDP）的数据传输服务</td>
<td>TCP、UDP</td>
<td>分段（Segment，TCP）&#x2F;数据报（Datagram，UDP）</td>
</tr>
<tr>
<td>网络层（互联层）</td>
<td>网络层</td>
<td>基于IP地址实现跨网络的路由转发，处理IP分片、地址解析等</td>
<td>IP、ICMP、IGMP、ARP、RARP</td>
<td>IP数据报（Packet）</td>
</tr>
<tr>
<td>网络接口层</td>
<td>数据链路层+物理层</td>
<td>定义物理传输介质（如线缆、接口）和数据帧格式，基于MAC地址实现局域网内通信</td>
<td>Ethernet、Token Ring、PPP、Frame Relay、MPLS</td>
<td>数据帧（Frame）</td>
</tr>
</tbody></table>
<h4 id="各层关键说明："><a href="#各层关键说明：" class="headerlink" title="各层关键说明："></a>各层关键说明：</h4><ul>
<li><strong>物理层</strong>（网络接口层下属）：定义电压标准、线缆类型（如CAT5双绞线、单模光纤）、接口规格（如RJ45），数据以“比特流”形式传输。</li>
<li><strong>数据链路层</strong>（网络接口层下属）：通过MAC地址（硬件地址，如00:0C:29:B4:F2:EF）识别局域网内设备，由交换机转发数据帧，核心功能包括帧同步、差错检测（如CRC校验）。</li>
<li><strong>网络层</strong>：由路由器实现跨子网路由，ARP协议负责将IP地址解析为MAC地址（“IP→MAC”映射），RARP协议则通过MAC地址反向获取IP地址；ICMP协议用于传输网络控制消息（如Ping的请求&#x2F;响应、路由重定向）。</li>
<li><strong>传输层</strong>：TCP协议通过“三次握手”建立连接、序列号确认、重传机制保障可靠性，适用于文件传输、网页加载等场景；UDP协议无连接、无确认，传输效率高，适用于视频流、语音通话、DNS查询等场景。</li>
<li><strong>应用层</strong>：整合表示层（数据压缩、加密&#x2F;解密，如HTTPS的SSL&#x2F;TLS加密）和会话层（建立&#x2F;维护通信会话，如TCP的会话管理）功能，直接对接用户应用（如浏览器、FTP客户端）。</li>
</ul>
<h3 id="（四）TCP-IP协议栈封包过程"><a href="#（四）TCP-IP协议栈封包过程" class="headerlink" title="（四）TCP&#x2F;IP协议栈封包过程"></a>（四）TCP&#x2F;IP协议栈封包过程</h3><p>数据从应用层到网络接口层传输时，会逐层添加对应协议头（封装）；接收端则从网络接口层到应用层逐层剥离协议头（解封装），具体过程如下：</p>
<ol>
<li><strong>应用层</strong>：用户应用程序生成原始数据（如网页HTML内容、FTP文件数据），应用层协议（如HTTP）添加协议头（如HTTP请求行、响应头），形成“应用层数据”。</li>
<li><strong>传输层</strong>：应用层数据传入传输层，TCP（或UDP）协议添加传输层头（含源端口、目标端口、序列号（TCP）、校验和等），形成“TCP分段”或“UDP数据报”。</li>
<li><strong>网络层</strong>：传输层数据传入网络层，IP协议添加IP头（含源IP、目标IP、TTL（生存时间）、协议类型（如TCP&#x3D;6、UDP&#x3D;17）、校验和等），形成“IP数据报”；若IP数据报超过MTU（最大传输单元，如Ethernet默认1500字节），则进行IP分片。</li>
<li><strong>网络层接口层</strong>：IP数据报传入网络接口层，数据链路层添加帧头（含源MAC、目标MAC、帧类型（如0x0800表示IP数据报））和帧尾（CRC校验字段），形成“数据帧”；物理层将数据帧转换为比特流，通过物理介质传输。</li>
</ol>
<p>接收端过程相反：物理层接收比特流→数据链路层校验帧尾、剥离帧头&#x2F;尾→网络层重组IP分片、剥离IP头→传输层校验端口、确认序列号（TCP）、剥离传输层头→应用层剥离应用层头，将原始数据交给应用程序。</p>
<h2 id="二、TCP-IP协议栈封包与路由原理"><a href="#二、TCP-IP协议栈封包与路由原理" class="headerlink" title="二、TCP&#x2F;IP协议栈封包与路由原理"></a>二、TCP&#x2F;IP协议栈封包与路由原理</h2><h3 id="（一）典型封包结构（以HTTP请求为例）"><a href="#（一）典型封包结构（以HTTP请求为例）" class="headerlink" title="（一）典型封包结构（以HTTP请求为例）"></a>（一）典型封包结构（以HTTP请求为例）</h3><p>从底层到上层，数据帧的完整结构如下（以Ethernet帧为例）：</p>
<table>
<thead>
<tr>
<th>层级</th>
<th>协议头&#x2F;尾</th>
<th>字段示例</th>
</tr>
</thead>
<tbody><tr>
<td>网络接口层（数据链路层）</td>
<td>Ethernet帧头（14字节）</td>
<td>源MAC：00:0C:29:B4:F2:EF（客户端）、目标MAC：00:50:56:E9:07:70（网关）、帧类型：0x0800（IP）</td>
</tr>
<tr>
<td>网络接口层（数据链路层）</td>
<td>IP数据报（含IP头20字节+TCP分段）</td>
<td>IP头：源IP 192.168.149.151（客户端）、目标IP 14.119.104.254（百度服务器）、TTL&#x3D;128、协议&#x3D;6（TCP）</td>
</tr>
<tr>
<td>传输层</td>
<td>TCP分段（含TCP头20字节+HTTP数据）</td>
<td>TCP头：源端口1258（客户端随机端口）、目标端口80（HTTP默认端口）、序列号&#x3D;123456、确认号&#x3D;0（建立连接阶段）</td>
</tr>
<tr>
<td>应用层</td>
<td>HTTP数据（含HTTP头+网页请求数据）</td>
<td>HTTP请求行：GET &#x2F;index.html HTTP&#x2F;1.1、Host：<a href="http://www.baidu.com、User-Agent：Chrome/112.0.0.0">www.baidu.com、User-Agent：Chrome/112.0.0.0</a></td>
</tr>
<tr>
<td>网络接口层（数据链路层）</td>
<td>Ethernet帧尾（4字节）</td>
<td>CRC校验值：0x12345678（用于检测帧传输错误）</td>
</tr>
</tbody></table>
<h3 id="（二）IP网络互连原理"><a href="#（二）IP网络互连原理" class="headerlink" title="（二）IP网络互连原理"></a>（二）IP网络互连原理</h3><p>跨局域网通信（如客户端访问公网服务器）需通过路由器实现路由转发，核心流程如下：</p>
<ol>
<li><strong>局域网内通信</strong>：客户端（如PC1，192.168.149.151）向同一子网内的主机（如PC2，192.168.149.152）发送数据时，通过ARP协议查询PC2的MAC地址，交换机根据MAC地址表直接转发数据帧，无需经过路由器。</li>
<li><strong>跨子网通信</strong>：客户端向公网服务器（如百度，14.119.104.254）发送数据时：<ul>
<li>客户端判断目标IP与自身不在同一子网（子网掩码255.255.255.0，14.119.104.254与192.168.149.151不在同一网段），将数据发送至默认网关（如192.168.149.2，路由器接口IP）。</li>
<li>网关路由器接收数据帧后，剥离帧头&#x2F;尾，解析IP头中的目标IP，查询路由表（通过BGP、OSPF等路由协议生成），确定下一跳路由器地址（如运营商骨干网路由器）。</li>
<li>数据通过多跳路由器转发，最终到达目标服务器所在子网的路由器，由该路由器将数据转发至目标服务器。</li>
<li>服务器响应数据按原路返回客户端，过程相反。</li>
</ul>
</li>
</ol>
<h4 id="关键技术："><a href="#关键技术：" class="headerlink" title="关键技术："></a>关键技术：</h4><ul>
<li><strong>ARP地址解析</strong>：局域网内主机通过广播ARP请求（“谁是192.168.149.152？请回复MAC地址”），目标主机单播ARP响应（“我是192.168.149.152，MAC地址是00:0C:29:B7:6E:8A”），主机将“IP-MAC”映射存入ARP缓存表（Windows通过<code>arp -a</code>查看）。</li>
<li><strong>路由协议</strong>：BGP（边界网关协议）用于AS之间的路由选择（如不同ISP之间的路由交互）；OSPF（开放式最短路径优先）用于AS内部的路由计算，基于“最短路径树”选择最优路由。</li>
</ul>
<h2 id="三、TCP-IP协议安全缺陷与典型攻击"><a href="#三、TCP-IP协议安全缺陷与典型攻击" class="headerlink" title="三、TCP&#x2F;IP协议安全缺陷与典型攻击"></a>三、TCP&#x2F;IP协议安全缺陷与典型攻击</h2><p>TCP&#x2F;IP协议设计之初未充分考虑安全性，各层级存在安全缺陷，攻击者可利用这些缺陷发起攻击，下表梳理各层级缺陷、对应攻击技术及破坏的安全属性（机密性、完整性、真实性、可用性）：</p>
<table>
<thead>
<tr>
<th>TCP&#x2F;IP层级</th>
<th>协议&#x2F;组件</th>
<th>安全缺陷</th>
<th>对应攻击技术</th>
<th>破坏的安全属性</th>
</tr>
</thead>
<tbody><tr>
<td>网络接口层</td>
<td>Ethernet</td>
<td>共享传输媒介，数据明文传输；缺乏MAC身份认证</td>
<td>网络嗅探（Wireshark抓包）、协议分析；MAC欺骗（伪造MAC地址）</td>
<td>机密性（嗅探）；真实性（MAC欺骗）</td>
</tr>
<tr>
<td>网络接口层</td>
<td>PPP</td>
<td>数据明文传输，无加密机制</td>
<td>网络嗅探、协议分析</td>
<td>机密性</td>
</tr>
<tr>
<td>网络层（互联层）</td>
<td>IPv4</td>
<td>缺乏IP地址身份认证；IP分片处理逻辑漏洞</td>
<td>IP地址欺骗（伪造源IP）；IP分片攻击（如Teardrop攻击，导致目标设备分片重组崩溃）</td>
<td>真实性（IP欺骗）；可用性（IP分片攻击）</td>
</tr>
<tr>
<td>网络层（互联层）</td>
<td>ICMP</td>
<td>ICMP路由重定向无身份认证；广播地址对Ping的放大器效应</td>
<td>ICMP路由重定向（伪造路由消息，篡改目标主机路由表）；Ping Flood（大量Ping请求耗尽目标带宽）、Smurf攻击（利用广播放大Ping流量）</td>
<td>完整性、真实性（路由重定向）；可用性（Ping Flood、Smurf）</td>
</tr>
<tr>
<td>网络层（互联层）</td>
<td>ARP</td>
<td>ARP请求&#x2F;响应无验证机制，可伪造ARP报文</td>
<td>ARP欺骗（伪造网关或主机的ARP响应，篡改目标主机ARP缓存表）</td>
<td>真实性、可用性（断网或流量劫持）</td>
</tr>
<tr>
<td>网络层（互联层）</td>
<td>BGP&#x2F;OSPF</td>
<td>缺乏强身份认证，路由更新报文可伪造</td>
<td>路由欺骗攻击（伪造BGP&#x2F;OSPF路由消息，篡改路由表，导致流量劫持）</td>
<td>完整性、真实性</td>
</tr>
<tr>
<td>传输层</td>
<td>TCP</td>
<td>TCP三次握手存在连接队列瓶颈；TCP会话无强身份认证</td>
<td>TCP SYN Flood（大量伪造SYN请求，耗尽服务器连接队列）；TCP RST攻击（伪造RST报文，断开合法TCP连接）；TCP会话劫持（窃取TCP会话ID，伪造会话数据）</td>
<td>可用性（SYN Flood、RST攻击）；真实性、可用性（会话劫持）</td>
</tr>
<tr>
<td>传输层</td>
<td>UDP</td>
<td>UDP无连接、无确认，可大量发送UDP数据包</td>
<td>UDP Flood（大量UDP数据包耗尽目标带宽或CPU资源）</td>
<td>可用性</td>
</tr>
<tr>
<td>应用层</td>
<td>DNS</td>
<td>DNS验证机制薄弱，DNS响应可伪造；DNS缓存无过期校验</td>
<td>DNS欺骗（伪造DNS响应，篡改目标主机DNS缓存）；DNS缓存投毒（向DNS服务器注入错误解析记录）</td>
<td>完整性、真实性</td>
</tr>
<tr>
<td>应用层</td>
<td>SMB</td>
<td>SMB协议的NTLM认证机制存在漏洞（如早期版本无加密）</td>
<td>SMB中间人攻击（拦截SMB通信，窃取认证凭据）</td>
<td>真实性、可用性</td>
</tr>
<tr>
<td>应用层</td>
<td>HTTP</td>
<td>URL明文传输；缺乏完整性保护；内嵌链接可被篡改</td>
<td>钓鱼攻击（伪造HTTP网页，骗取用户账号密码）；网页木马攻击（篡改HTTP页面，植入恶意脚本）</td>
<td>完整性、真实性</td>
</tr>
</tbody></table>
<h2 id="四、典型攻击实施与防御（含实验验证）"><a href="#四、典型攻击实施与防御（含实验验证）" class="headerlink" title="四、典型攻击实施与防御（含实验验证）"></a>四、典型攻击实施与防御（含实验验证）</h2><h3 id="（一）MAC泛洪攻击"><a href="#（一）MAC泛洪攻击" class="headerlink" title="（一）MAC泛洪攻击"></a>（一）MAC泛洪攻击</h3><h4 id="1-攻击原理"><a href="#1-攻击原理" class="headerlink" title="1. 攻击原理"></a>1. 攻击原理</h4><p>MAC泛洪攻击针对局域网交换机，利用交换机的“MAC地址学习”和“MAC地址表老化”机制：</p>
<ul>
<li><strong>交换机工作流程</strong>：交换机维护一个MAC地址表（通常容量8K左右），记录“MAC地址→端口”映射；当接收数据帧时，若目标MAC在表中，直接转发至对应端口；若不在表中，向所有端口广播（泛洪）该帧。</li>
<li><strong>MAC学习机制</strong>：交换机接收数据帧时，将帧的源MAC地址与入端口号记录到MAC表中；若某MAC地址长时间（默认300秒）无通信，交换机将其从表中删除（老化）。</li>
<li><strong>攻击逻辑</strong>：攻击者通过工具（如macof）伪造大量随机MAC地址的数据包，发送给交换机；交换机持续学习这些虚假MAC地址，很快填满MAC地址表；此后，正常主机的MAC地址因表满无法添加，交换机对所有数据帧进行广播，攻击者可通过嗅探工具（如Wireshark）捕获局域网内所有主机的通信数据（如FTP账号密码、HTTP网页内容）。</li>
</ul>
<h4 id="2-实验验证（Kali-Linux环境）"><a href="#2-实验验证（Kali-Linux环境）" class="headerlink" title="2. 实验验证（Kali Linux环境）"></a>2. 实验验证（Kali Linux环境）</h4><h5 id="实验拓扑"><a href="#实验拓扑" class="headerlink" title="实验拓扑"></a>实验拓扑</h5><ul>
<li>攻击机：Kali Linux（192.168.149.156），安装Dsniff套件（含macof、arpspoof工具）。</li>
<li>目标主机：Windows XP（192.168.149.151），需访问FTP服务器。</li>
<li>目标服务器：Metasploitable2-Linux（192.168.149.155），运行FTP服务（用户名msfadmin，密码msfadmin）。</li>
<li>网络设备：局域网交换机（连接三台设备）。</li>
</ul>
<h5 id="实验步骤"><a href="#实验步骤" class="headerlink" title="实验步骤"></a>实验步骤</h5><ol>
<li><strong>安装Dsniff套件</strong>：在Kali终端执行命令，安装嗅探与欺骗工具：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install dsniff  <span class="comment"># 安装Dsniff</span></span><br><span class="line">macof -h  <span class="comment"># 验证macof是否安装成功（显示帮助信息则成功）</span></span><br><span class="line">arpspoof -h  <span class="comment"># 验证arpspoof是否安装成功</span></span><br></pre></td></tr></table></figure></li>
<li><strong>发起MAC泛洪攻击</strong>：在Kali终端执行<code>macof</code>命令，工具将自动生成大量伪造MAC地址的数据包，发送给交换机：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">macof  <span class="comment"># 启动MAC泛洪，终端将持续输出伪造的MAC地址与数据包信息</span></span><br></pre></td></tr></table></figure></li>
<li><strong>启动Wireshark嗅探</strong>：在Kali新终端执行<code>wireshark</code>，选择网卡eth0开始抓包，过滤规则设为“ftp”（捕获FTP通信）。</li>
<li><strong>目标主机访问FTP服务器</strong>：在Windows XP中打开IE浏览器，输入<code>ftp://192.168.149.155</code>，输入用户名msfadmin、密码msfadmin登录。</li>
<li><strong>分析嗅探结果</strong>：在Wireshark中停止抓包，查看FTP协议数据包，可清晰看到<code>USER msfadmin</code>（用户名）和<code>PASS msfadmin</code>（密码）的明文信息，证明攻击成功（交换机广播数据帧，被Kali嗅探捕获）。</li>
</ol>
<h4 id="3-防御措施"><a href="#3-防御措施" class="headerlink" title="3. 防御措施"></a>3. 防御措施</h4><p>核心是限制交换机端口的MAC地址数量，防止MAC表被填满，关键技术为<strong>Port-Security（端口安全性）</strong>：</p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/./assets/lbxw.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/./assets/lbxw.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">蜡笔小王</div><div class="post-copyright__author_desc">不想学习啊！！！</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://wjh0527.github.io.git/2025/09/03/%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://wjh0527.github.io.git/2025/09/03/%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/')">网络通信</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/null" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/null" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://wjh0527.github.io.git/2025/09/03/%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=网络通信&amp;url=https://wjh0527.github.io.git/2025/09/03/%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/&amp;pic=" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://wjh0527.github.io.git" target="_blank">蜡笔小王的博客</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>网络基础<span class="tagsPageCount">20</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="/./assets/lbxw.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/09/03/sql%E6%B3%A8%E5%85%A5%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">sql注入常用函数</div></div></a></div><div class="next-post pull-right"><a href="/2025/09/03/VRP/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">VRP</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2025/09/03/DHCP/" title="DHCP"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-03</div><div class="title">DHCP</div></div></a></div><div><a href="/2025/09/03/Firewall/" title="Firewall"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-03</div><div class="title">Firewall</div></div></a></div><div><a href="/2025/09/03/GVRP/" title="GVRP"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-03</div><div class="title">GVRP</div></div></a></div><div><a href="/2025/09/04/OSPF/" title="OSPF"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-04</div><div class="title">OSPF</div></div></a></div><div><a href="/2025/09/04/RIP/" title="RIP"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-04</div><div class="title">RIP</div></div></a></div><div><a href="/2025/09/03/VLAN%E6%8A%80%E6%9C%AF/" title="VLAN技术"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-03</div><div class="title">VLAN技术</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/./assets/lbxw.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description"></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content">别看了，去玩会吧</div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(null) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1"><span class="toc-number">1.</span> <span class="toc-text">网络通信</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81TCP-IP%E5%8D%8F%E8%AE%AE%E5%9F%BA%E7%A1%80%E4%B8%8E%E7%BD%91%E7%BB%9C%E7%BB%93%E6%9E%84"><span class="toc-number">1.1.</span> <span class="toc-text">一、TCP&#x2F;IP协议基础与网络结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%88%E4%B8%80%EF%BC%89Internet%E6%A0%B8%E5%BF%83%E7%BB%93%E6%9E%84%E7%BB%84%E6%88%90"><span class="toc-number">1.1.1.</span> <span class="toc-text">（一）Internet核心结构组成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%88%E4%BA%8C%EF%BC%89IP%E5%9C%B0%E5%9D%80%E5%88%86%E7%B1%BB%E4%B8%8ENAT%E6%8A%80%E6%9C%AF"><span class="toc-number">1.1.2.</span> <span class="toc-text">（二）IP地址分类与NAT技术</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%88%E4%B8%89%EF%BC%89TCP-IP%E5%8D%8F%E8%AE%AE%E6%A0%88%E7%BB%93%E6%9E%84"><span class="toc-number">1.1.3.</span> <span class="toc-text">（三）TCP&#x2F;IP协议栈结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%84%E5%B1%82%E5%85%B3%E9%94%AE%E8%AF%B4%E6%98%8E%EF%BC%9A"><span class="toc-number">1.1.3.1.</span> <span class="toc-text">各层关键说明：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%88%E5%9B%9B%EF%BC%89TCP-IP%E5%8D%8F%E8%AE%AE%E6%A0%88%E5%B0%81%E5%8C%85%E8%BF%87%E7%A8%8B"><span class="toc-number">1.1.4.</span> <span class="toc-text">（四）TCP&#x2F;IP协议栈封包过程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81TCP-IP%E5%8D%8F%E8%AE%AE%E6%A0%88%E5%B0%81%E5%8C%85%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8E%9F%E7%90%86"><span class="toc-number">1.2.</span> <span class="toc-text">二、TCP&#x2F;IP协议栈封包与路由原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%88%E4%B8%80%EF%BC%89%E5%85%B8%E5%9E%8B%E5%B0%81%E5%8C%85%E7%BB%93%E6%9E%84%EF%BC%88%E4%BB%A5HTTP%E8%AF%B7%E6%B1%82%E4%B8%BA%E4%BE%8B%EF%BC%89"><span class="toc-number">1.2.1.</span> <span class="toc-text">（一）典型封包结构（以HTTP请求为例）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%88%E4%BA%8C%EF%BC%89IP%E7%BD%91%E7%BB%9C%E4%BA%92%E8%BF%9E%E5%8E%9F%E7%90%86"><span class="toc-number">1.2.2.</span> <span class="toc-text">（二）IP网络互连原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF%EF%BC%9A"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">关键技术：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81TCP-IP%E5%8D%8F%E8%AE%AE%E5%AE%89%E5%85%A8%E7%BC%BA%E9%99%B7%E4%B8%8E%E5%85%B8%E5%9E%8B%E6%94%BB%E5%87%BB"><span class="toc-number">1.3.</span> <span class="toc-text">三、TCP&#x2F;IP协议安全缺陷与典型攻击</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%85%B8%E5%9E%8B%E6%94%BB%E5%87%BB%E5%AE%9E%E6%96%BD%E4%B8%8E%E9%98%B2%E5%BE%A1%EF%BC%88%E5%90%AB%E5%AE%9E%E9%AA%8C%E9%AA%8C%E8%AF%81%EF%BC%89"><span class="toc-number">1.4.</span> <span class="toc-text">四、典型攻击实施与防御（含实验验证）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%88%E4%B8%80%EF%BC%89MAC%E6%B3%9B%E6%B4%AA%E6%94%BB%E5%87%BB"><span class="toc-number">1.4.1.</span> <span class="toc-text">（一）MAC泛洪攻击</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%94%BB%E5%87%BB%E5%8E%9F%E7%90%86"><span class="toc-number">1.4.1.1.</span> <span class="toc-text">1. 攻击原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%AE%9E%E9%AA%8C%E9%AA%8C%E8%AF%81%EF%BC%88Kali-Linux%E7%8E%AF%E5%A2%83%EF%BC%89"><span class="toc-number">1.4.1.2.</span> <span class="toc-text">2. 实验验证（Kali Linux环境）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E6%8B%93%E6%89%91"><span class="toc-number">1.4.1.2.1.</span> <span class="toc-text">实验拓扑</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.4.1.2.2.</span> <span class="toc-text">实验步骤</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E9%98%B2%E5%BE%A1%E6%8E%AA%E6%96%BD"><span class="toc-number">1.4.1.3.</span> <span class="toc-text">3. 防御措施</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/12/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E/" title="文件上传漏洞">文件上传漏洞</a><time datetime="2025-09-12T02:41:27.000Z" title="发表于 2025-09-12 10:41:27">2025-09-12</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/12/xss/" title="xss">xss</a><time datetime="2025-09-12T02:38:56.000Z" title="发表于 2025-09-12 10:38:56">2025-09-12</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/08/linuxFTP%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE/" title="linuxFTP服务器配置">linuxFTP服务器配置</a><time datetime="2025-09-08T01:00:21.000Z" title="发表于 2025-09-08 09:00:21">2025-09-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/04/Windows-server%E6%9C%8D%E5%8A%A1%E5%99%A8/" title="Windows-server服务器">Windows-server服务器</a><time datetime="2025-09-04T07:05:17.000Z" title="发表于 2025-09-04 15:05:17">2025-09-04</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/04/%E6%97%A0%E7%BA%BF%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF/" title="无线网络技术">无线网络技术</a><time datetime="2025-09-04T05:37:32.000Z" title="发表于 2025-09-04 13:37:32">2025-09-04</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"/></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2024 - 2025 By <a class="footer-bar-link" href="/" title="蜡笔小王" target="_blank">蜡笔小王</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">27</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">5</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">4</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="安知鱼的博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="安知鱼的博客"/><span class="back-menu-item-text">安知鱼的博客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Linux/" style="font-size: 0.88rem;">Linux<sup>1</sup></a><a href="/tags/SQL%E6%B3%A8%E5%85%A5/" style="font-size: 0.88rem;">SQL注入<sup>2</sup></a><a href="/tags/windows/" style="font-size: 0.88rem;">windows<sup>1</sup></a><a href="/tags/%E6%BC%8F%E6%B4%9E/" style="font-size: 0.88rem;">漏洞<sup>1</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/" style="font-size: 0.88rem;">网络基础<sup>20</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.cbd.int/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (true){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("12/01/2024 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2024 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 蜡笔小王 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>